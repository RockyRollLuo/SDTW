/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.65
 * Generated at: 2017-04-20 01:04:40 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.main;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.util.Map;
import com.xietong.software.base.Power;
import com.xietong.software.common.CEditConst;
import java.util.ArrayList;
import com.xietong.software.base.CNavTree;
import com.xietong.software.util.ParamUtils;
import com.xietong.software.util.Tool;
import com.xietong.software.common.UserInfo;
import com.xietong.software.common.HeadConst;

public final class default_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=utf-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");

response.setHeader("Cache-Control", "no-cache, must-revalidate");
response.setHeader("Pragma", "no-cache");
UserInfo userInfo = Tool.getUserInfo(request);
if(userInfo==null){
	out.print("<meta http-equiv='refresh' content='0;url="+ HeadConst.root_url_path + "/main/logon.jsp'>");
    return;
} 

String md = ParamUtils.getParameter(request, "md", "1");
CNavTree tree = new CNavTree();
String wel = "welcome.jsp";
if(md.equals("3") || md.equals("4")||md.equals("5")||md.equals("6")||md.equals("7")||md.equals("8")||md.equals("2")){
	wel = "website/welcome.jsp?md="+md;
}

      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n");
      out.write("<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\r\n");
      out.write("<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\r\n");
      out.write("<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n");
      out.write("<title>");
      out.print(HeadConst.product_name );
      out.write("</title>\r\n");
      out.write("<base href=\"");
      out.print(HeadConst.apache_url );
      out.write("/main/\"></base>\r\n");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "jqueryui.jsp", out, false);
      out.write("\r\n");
      out.write("<link href=\"js/jquery-ui-1.10.2/themes/bootstrap/assets/css/bootstrap.min.css\" rel=\"stylesheet\"/>\r\n");
      out.write("<link type=\"text/css\" href=\"js/jquery-ui-1.10.2/themes/bootstrap/css/custom-theme/jquery-ui-1.10.0.custom.css\" rel=\"stylesheet\" />\r\n");
      out.write("<link type=\"text/css\" href=\"js/jquery-ui-1.10.2/themes/bootstrap/assets/css/font-awesome.min.css\" rel=\"stylesheet\" />\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<link href=\"js/jquery-ui-1.10.2/themes/bootstrap/assets/css/docs.css\" rel=\"stylesheet\">\r\n");
      out.write("<link href=\"images/skin/blue/css.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("<link href=\"js/jquery-ui-1.10.2/themes/bootstrap/assets/js/google-code-prettify/prettify.css\" rel=\"stylesheet\">\r\n");
      out.write("\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.print(HeadConst.apache_url);
      out.write("/main/js/sticky/sticky.css\"  />    \r\n");
      out.write("<script src=\"");
      out.print(HeadConst.apache_url);
      out.write("/main/js/sticky/sticky.min.js\" ></script>\r\n");
      out.write("<script language=\"JavaScript\" type=\"text/javascript\" src=\"js/tab.js\"></script>\r\n");
      out.write("<script language=\"JavaScript\" type=\"text/javascript\" src=\"js/tab1.js\"></script>\r\n");
      out.write("<script language=\"JavaScript\" type=\"text/javascript\" src=\"js/jquery.nicescroll.js\"></script>\r\n");
      out.write("<script src=\"js/index.js\" type=\"text/javascript\"></script>\r\n");
      out.write("<script src=\"js/main.js\" type=\"text/javascript\"></script>\r\n");
      out.write("<script language=\"JavaScript\" src=\"");
      out.print(HeadConst.apache_url);
      out.write("/main/js/datepicker/WdatePicker.js\"></script>\r\n");
      out.write("<script src=\"");
      out.print(userInfo.getRootUrl());
      out.write("/main/js/jquery.form.js\"></script>\r\n");
      out.write("<link href=\"js/win/corner_win.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("<script type=\"text/javascript\" src=\"js/win/corner_win.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"js/win/index_win.js\"></script>\r\n");
      out.write("<script>\r\n");
      out.write("var md=\"");
      out.print(md);
      out.write("\";\r\n");
      out.write("var userId = (");
      out.print(userInfo.getId());
      out.write(");\r\n");
      out.write("function show(id){\r\n");
      out.write("\tif(id==0){//oa首页\r\n");
      out.write("\t\tlocation=\"default.jsp\";\r\n");
      out.write("\t}else if(id==1){//修改密码\r\n");
      out.write("\t\tmainFrame.location=\"modifyPwd.jsp\";\r\n");
      out.write("\t}else if(id==11){//个人资料\r\n");
      out.write("\t\tmainFrame.location=\"main/personal/UserCode2Action.jsp?cmd=modify&Id=");
      out.print(userInfo.getUserCode().getId() );
      out.write("\";\r\n");
      out.write("\t}else if(id==12){//安全退出\r\n");
      out.write("\t\tlocation=\"logoff.jsp\";\r\n");
      out.write("\t}\r\n");
      out.write("}\r\n");
      out.write("/*\r\n");
      out.write(" * 页面高度\r\n");
      out.write(" */\r\n");
      out.write("function initHeight(){\r\n");
      out.write("\tvar clienth = document.documentElement.clientHeight-154;\r\n");
      out.write("\tvar clientw = document.documentElement.clientWidth-255;\r\n");
      out.write("\t$('.right').height(clienth);\r\n");
      out.write("\t$('.right').width(clientw);\r\n");
      out.write("\t$('.left').height(clienth);\r\n");
      out.write("\t//alert(clienth)\r\n");
      out.write("}\r\n");
      out.write("$(function(){\r\n");
      out.write("\tinitHeight();\r\n");
      out.write("\t$(\".left\").niceScroll({cursorborder:\"\",cursorcolor:\"#e85280\",boxzoom:false,autohidemode:false}); \r\n");
      out.write("\t//$(\".right\").niceScroll(\"#mainFrame\",{cursorcolor:\"#00F\",cursoropacitymax:0.7,boxzoom:false});\r\n");
      out.write("\twindow.onresize = initHeight;\r\n");
      out.write("\t//屏蔽站内信 setInterval(getShortMsg,1000*30);\r\n");
      out.write("});\r\n");
      out.write("\r\n");
      out.write("/*\r\n");
      out.write(" * 菜单展示\r\n");
      out.write(" */\r\n");
      out.write("function showmenu(cur){\r\n");
      out.write("\tvar tmp = $(cur).next(\"div\");\r\n");
      out.write("\tif(tmp.hasClass('tree_select')){\r\n");
      out.write("\t\ttmp.slideUp();\r\n");
      out.write("\t\ttmp.removeClass('tree_select');\r\n");
      out.write("\t}else{\r\n");
      out.write("\t\t$(cur).siblings(\"div\").each(function(){\r\n");
      out.write("\t\t\tif($(this).hasClass('tree_select')){\r\n");
      out.write("\t\t\t\t$(this).slideUp();\r\n");
      out.write("\t\t\t\t$(this).removeClass('tree_select');\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\ttmp.slideDown();\r\n");
      out.write("\t\ttmp.addClass('tree_select');\r\n");
      out.write("\t\tif($(cur)[0].tagName == 'LI'){\r\n");
      out.write("\t\t\t$(cur).siblings().find('a').removeAttr('style');\r\n");
      out.write("\t\t\t$(cur).find(\"a\").attr('style','color:#fd6500');\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tsetTimeout(function(){$(\".left\").getNiceScroll().resize()},500);\r\n");
      out.write("\t}\r\n");
      out.write("}\r\n");
      out.write("/*\r\n");
      out.write(" * 当前菜单样式\r\n");
      out.write(" */\r\n");
      out.write("function curMenu(cur){\r\n");
      out.write("\t$(\".left\").find('a').each(function(){\r\n");
      out.write("\t\t$(this).removeAttr('style');\r\n");
      out.write("\t})\r\n");
      out.write("\t$(cur).attr('style','color:#fd6500');\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("\t\r\n");
      out.write("$(document).ready(function(){ \r\n");
      out.write("    $(\"#mainFrame\").load(function(){ \r\n");
      out.write("    $(this).height(0); //用于每次刷新时控制IFRAME高度初始化 \r\n");
      out.write("    var height = $(this).contents().height() + 30; \r\n");
      out.write("    var clienth = document.documentElement.clientHeight-164;\r\n");
      out.write("    $(this).height( height < clienth ? clienth : height ); \r\n");
      out.write("  }); \r\n");
      out.write("}); \r\n");
      out.write("document.documentElement.className += 'js';\r\n");
      out.write("</script>\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write("iframe{\r\n");
      out.write("\twidth:100%;\r\n");
      out.write("}\r\n");
      out.write("html{overflow-y:hidden; }\r\n");
      out.write(".jstree-closed{display:none;}\r\n");
      out.write("</style>\r\n");
      out.write("</head>\r\n");
      out.write("\r\n");
      out.write("<body>\r\n");
      out.write("<div class=\"top\">\r\n");
      out.write("<div style=\"height: auto;padding-top: 0px;padding-left: 10px;width: 100%; background: #000000;\">\r\n");

Map RoleNameMap = CEditConst.getRoleNameMap(userInfo);
Map AcademyNameMap = CEditConst.getAcademyNameMap(userInfo);

      out.write("\r\n");
      out.write("    <span style=\"color:#EEB422;font-size: 12px;\">用户账户：<font style=\"color: #ffffff\">");
      out.print(userInfo.getUserCode().getName());
      out.write("</font></span>\r\n");
      out.write("\t&nbsp;&nbsp;<span style=\"color:#EEB422;font-size: 12px;\">角色：<font style=\"color: #ffffff\">");
      out.print(RoleNameMap.get(userInfo.getUserCode().getRoles()));
      out.write("</font></span>\r\n");
      out.write("\t    ");

	    if(userInfo.hasFunPower(Power.UserAdminPower)||userInfo.hasFunPower(Power.STUSER)){
      out.write("\r\n");
      out.write("\t    \t<span style=\"color:#EEB422;font-size: 12px;\"><font style=\"color: #ffffff\">\r\n");
      out.write("\t    \t(所属单位：");
      out.print(AcademyNameMap.get(userInfo.getDeptId()+"") );
      out.write(")\r\n");
      out.write("\t    \t</font></span>\r\n");
      out.write("\t    ");
}
	    
      out.write("\r\n");
      out.write("\t    ");

	    if(userInfo.hasFunPower(Power.ADMINPOWER)){
      out.write("\r\n");
      out.write("\t    \t<span style=\"color:#EEB422;font-size: 12px;\"><font style=\"color: #ffffff\">(团委用户)</font></span>\r\n");
      out.write("\t    ");
}
	    
      out.write("\r\n");
      out.write("\t\t");
      out.write("\r\n");
      out.write("    </div>\r\n");
      out.write("<div class=\"area\">\r\n");
      out.write("\t<div id=\"loading_layer\" style=\"display:none\"><img src=\"images/ajax_loader.gif\"  alt=\"\" /></div>\r\n");
      out.write("    <div class=\"logo\"><a href=\"#\"><img src=\"../images/topBanner.png\" /></a></div>\r\n");
      out.write("    <div class=\"anbn\">\r\n");
      out.write("        <a class=\"mo0099\" id=\"arrowLeft\" href=\"javascript:void(0);\"></a>\r\n");
      out.write("\t    <ul id=\"ancn\">\r\n");
      out.write("\t        <span>\r\n");
      out.write("\t\t    <li class=\"");
      out.print(md.equals("1")? "dangqian001" : "mo001");
      out.write("\"><a href=\"default.jsp\">山东大学</a></li>\r\n");
      out.write("\t\t     \r\n");
      out.write("\t\t    </span>\r\n");
      out.write("\t\t</ul>\r\n");
      out.write("\t\t<a class=\"mo009\" id=\"arrowRight\" href=\"javascript:void(0);\" onclick=\"gpSwitch('left')\"></a>\r\n");
      out.write("\t\t<div class=\"mo010\" id=\"exit\"><a href=\"javascript:show(12);\">退出系统</a></div>\r\n");
      out.write("\t\t\r\n");
      out.write("\t</div>\r\n");
      out.write("</div>\r\n");
      out.write("</div>\r\n");
      out.write("<div class=\"area\">\r\n");
      out.write("    <div class=\"left\">\r\n");
      out.write("\t\t ");
      out.print( tree.getMainMenu(userInfo) );
      out.write("\r\n");
      out.write("\t</div>\r\n");
      out.write("    <div class=\"right\" id=\"right\" class=\"content\">\r\n");
      out.write("\t    <iframe id=\"mainFrame\" name=\"mainFrame\" frameborder=\"0\" width=\"100%\" src=\"sitemsg-list.jsp\" ></iframe>\r\n");
      out.write("\t</div>\r\n");
      out.write("</div>\r\n");
      out.write("<div class=\"end\">");
      out.write("————  版权所有  ");
      out.print(HeadConst.product_copyright );
      out.write("  ————<div class=\"back_home\"><a href=\"");
      out.print(HeadConst.apache_url);
      out.write("\">网站首页</a></div></div>\r\n");
      out.write("<div id=\"top_dialog\"></div>\r\n");
      out.write("<script>\r\n");
      out.write("$(\"#top_dialog\").dialog({\r\n");
      out.write("\tmodal: true,\r\n");
      out.write("\tautoOpen:false,\r\n");
      out.write("\theight:0\r\n");
      out.write("});\r\n");
      out.write("var tmpW = 900 , tmpH = 600;\r\n");
      out.write("$('.ui-dialog-title').dblclick(function(){\r\n");
      out.write("\tvar d_h1 = parent.document.documentElement.scrollHeight;\r\n");
      out.write("\tvar d_h2 = parent.document.body.scrollHeight;\r\n");
      out.write("\tvar d_h = Math.max(d_h1, d_h2);\r\n");
      out.write("\tif($(\"#top_dialog\").dialog('option','width') != $('body').width()){\r\n");
      out.write("\t\t$(\"#top_dialog\").dialog('option','width',$('body').width());\r\n");
      out.write("\t\t$(\"#top_dialog\").dialog('option','height',d_h);\r\n");
      out.write("\t}else{\r\n");
      out.write("\t\t$(\"#top_dialog\").dialog('option','width',tmpW);\r\n");
      out.write("\t\t$(\"#top_dialog\").dialog('option','height',tmpH);\r\n");
      out.write("\t}\r\n");
      out.write("});\r\n");
      out.write("</script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
      out.write("<script>\r\n");
      out.write("setTimeout('$(\"html\").removeClass(\"js\");',1000);\r\n");
      out.write("</script>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
